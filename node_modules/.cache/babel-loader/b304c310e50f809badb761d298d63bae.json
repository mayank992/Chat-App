{"ast":null,"code":"import axios from \"axios\";\nimport { knownUsers, users, knownChannels, channels } from \"./fixture\";\nimport { MESSAGE_TYPE } from \"../constants/index\";\n\nasync function delay(ms) {\n  await new Promise((resolve, reject) => {\n    setTimeout(() => resolve(\"\"), ms);\n  });\n}\n\nexport async function getUsers() {\n  await delay(1000);\n  return users;\n}\nexport async function getKnownUsers(userId) {\n  const res = await axios.get(\"/users/known\", {\n    headers: {\n      userid: userId\n    }\n  });\n  console.log(res.data);\n  return res.data.map(user => ({ ...user,\n    unreadCount: 0\n  }));\n}\nexport async function getChannels() {\n  await delay(1000);\n  return channels;\n}\nexport async function getKnownChannels() {\n  await delay(1000);\n  return knownChannels;\n}\nexport async function getMessages(userId, type, id) {\n  const url = type === MESSAGE_TYPE.DM ? `/users/${id}/dms` : `/channels/${id}/messages`;\n  const res = await axios.get(url, {\n    headers: {\n      userId: userId\n    }\n  });\n  return res.data;\n}\nexport async function getMembers(channelId) {\n  await delay(1000);\n  return knownUsers;\n}\nexport async function sendMessageAPI(message) {\n  let url = message.type === MESSAGE_TYPE.DM ? `/users/${message.toId}/dms` : `/channels/${message.toId}/messages`;\n  const res = await axios.post(url, {\n    from: message.from,\n    fromId: message.fromId,\n    to: message.to,\n    toId: message.toId,\n    text: message.text\n  }, {\n    headers: {\n      userid: message.fromId\n    }\n  });\n  return;\n}\nexport async function loginAPI(_ref) {\n  let {\n    username,\n    firstname,\n    lastname\n  } = _ref;\n  const res = await axios.post(\"/login\", {\n    username,\n    firstname,\n    lastname\n  });\n  return res.data;\n}","map":{"version":3,"sources":["/Users/mayank/Desktop/assignments/chat-app/src/helpers/index.ts"],"names":["axios","knownUsers","users","knownChannels","channels","MESSAGE_TYPE","delay","ms","Promise","resolve","reject","setTimeout","getUsers","getKnownUsers","userId","res","get","headers","userid","console","log","data","map","user","unreadCount","getChannels","getKnownChannels","getMessages","type","id","url","DM","getMembers","channelId","sendMessageAPI","message","toId","post","from","fromId","to","text","loginAPI","username","firstname","lastname"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {\n  knownUsers,\n  users,\n  knownChannels,\n  channels,\n  messages,\n} from \"./fixture\";\nimport { MESSAGE_TYPE } from \"../constants/index\";\n\nasync function delay(ms: number) {\n  await new Promise((resolve, reject) => {\n    setTimeout(() => resolve(\"\"), ms);\n  });\n}\n\nexport async function getUsers() {\n  await delay(1000);\n  return users;\n}\n\nexport async function getKnownUsers(userId: string) {\n  const res = await axios.get(\"/users/known\", {\n    headers: { userid: userId },\n  });\n\n  console.log(res.data);\n\n  return res.data.map((user: any) => ({ ...user, unreadCount: 0 }));\n}\n\nexport async function getChannels() {\n  await delay(1000);\n  return channels;\n}\n\nexport async function getKnownChannels() {\n  await delay(1000);\n  return knownChannels;\n}\n\nexport async function getMessages(\n  userId: string,\n  type: MESSAGE_TYPE,\n  id: string\n) {\n  const url =\n    type === MESSAGE_TYPE.DM ? `/users/${id}/dms` : `/channels/${id}/messages`;\n\n  const res = await axios.get(url, { headers: { userId: userId } });\n\n  return res.data;\n}\n\nexport async function getMembers(channelId: string) {\n  await delay(1000);\n  return knownUsers;\n}\n\nexport async function sendMessageAPI(message: {\n  type: MESSAGE_TYPE;\n  from: string;\n  fromId: string;\n  to: string;\n  toId: string;\n  text: string;\n}) {\n  let url =\n    message.type === MESSAGE_TYPE.DM\n      ? `/users/${message.toId}/dms`\n      : `/channels/${message.toId}/messages`;\n\n  const res = await axios.post(\n    url,\n    {\n      from: message.from,\n      fromId: message.fromId,\n      to: message.to,\n      toId: message.toId,\n      text: message.text,\n    },\n    { headers: { userid: message.fromId } }\n  );\n\n  return;\n}\n\nexport async function loginAPI({\n  username,\n  firstname,\n  lastname,\n}: {\n  username: string;\n  firstname: string;\n  lastname: string;\n}) {\n  const res = await axios.post(\"/login\", {\n    username,\n    firstname,\n    lastname,\n  });\n\n  return res.data;\n}\n"]},"metadata":{},"sourceType":"module"}